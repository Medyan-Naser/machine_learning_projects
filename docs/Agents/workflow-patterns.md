# Agent Workflow Patterns

## Reflection
Reflection is a prompting strategy aimed at improving the quality and accuracy of outputs generated by AI agents.

A reflection loop gets the agent to pause, review, and critique its own output before finalizing it. In practice, this often looks like:

- Generate a first draft
- Critique the draft (identify gaps, errors, missing constraints)
- Revise
- Repeat until a stopping condition is reached

A useful mental model is:

- **System 1**: reactive and fast (first response)
- **System 2**: reflective and deliberate (review + refinement)

Reflection agents push the system toward **System 2** behavior.

## Routing
Routing is a pattern where an LLM (or a small router agent) classifies/interprets incoming input and routes it to an appropriate downstream handler (agent, chain, tool, or workflow branch).

Itâ€™s useful when you have multiple intents and want specialized logic per intent.

### Use cases
- Customer support (billing vs technical vs general)
- Multi-skill assistants (summarize vs translate vs extract)
- Adaptive tutoring (math vs science vs writing)

### Common routing techniques
- **Hard-coded routing**: rules/keywords (simple but brittle)
- **LLM-based routing**: a classification prompt that chooses a label/route
- **Embedding-based routing**: semantic matching against route descriptions/examples

## Parallelization
Parallelization runs multiple LLM tasks at the same time when they are independent, then merges results.

### Use cases
- Summarize different sections of a large document concurrently
- Generate multiple variants of copy and then select/rank
- Run multiple safety/quality checks and compare outcomes
- Ensemble multiple runs/models for consensus

### Common parallelization techniques
- **Format diversity**: same input, different prompt styles/output formats
- **Task splitting**: split input into parts and process each part
- **Consensus voting**: multiple independent solutions, then select/merge the best
